<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="The Case of the Sudden OC4J Restarts [part 2]" /><meta name="author" content="George Aristy" /><meta property="og:locale" content="en_US" /><meta name="description" content="TL;DR for JDK 1.5, watch your Full GC frequency with sun.rmi.dgc.server.gcInterval/sun.rmi.dgc.client.gcInterval." /><meta property="og:description" content="TL;DR for JDK 1.5, watch your Full GC frequency with sun.rmi.dgc.server.gcInterval/sun.rmi.dgc.client.gcInterval." /><link rel="canonical" href="https://georgearisty.dev/posts/the-case-of-sudden-oc4j-restarts-part-2/" /><meta property="og:url" content="https://georgearisty.dev/posts/the-case-of-sudden-oc4j-restarts-part-2/" /><meta property="og:site_name" content="George Aristy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2013-04-16T22:11:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="The Case of the Sudden OC4J Restarts [part 2]" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@George Aristy" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"George Aristy"},"dateModified":"2017-07-30T12:52:39-04:00","datePublished":"2013-04-16T22:11:00-04:00","description":"TL;DR for JDK 1.5, watch your Full GC frequency with sun.rmi.dgc.server.gcInterval/sun.rmi.dgc.client.gcInterval.","headline":"The Case of the Sudden OC4J Restarts [part 2]","mainEntityOfPage":{"@type":"WebPage","@id":"https://georgearisty.dev/posts/the-case-of-sudden-oc4j-restarts-part-2/"},"url":"https://georgearisty.dev/posts/the-case-of-sudden-oc4j-restarts-part-2/"}</script><title>The Case of the Sudden OC4J Restarts [part 2] | George Aristy</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="George Aristy"><meta name="application-name" content="George Aristy"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/lib/fonts/main.css"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="/assets/lib/bootstrap-4.6.1/bootstrap.min.css"><link rel="stylesheet" href="/assets/lib/fontawesome-free-5.15.4/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/lib/magnific-popup-1.1.0/magnific-popup.css"> <script src="/assets/lib/jquery-3.6.0/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/portrait.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">George Aristy</a></div><div class="site-subtitle font-italic">Blog about software craftmanship</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/bookshelf/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKSHELF</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-project-diagram ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/talks/" class="nav-link"> <i class="fa-fw fas fa-comment ml-xl-3 mr-xl-3 unloaded"></i> <span>TALKS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/llorllale" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['george.aristy','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/georgearisty/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://stackoverflow.com/users/1623885/george-aristy" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>The Case of the Sudden OC4J Restarts [part 2]</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>The Case of the Sudden OC4J Restarts [part 2]</h1><div class="post-meta text-muted"><div> By <em> <a href="https://www.linkedin.com/in/georgearisty">George Aristy</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1366164660" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2013-04-16 </em> </span> <span> Updated <em class="timeago" data-ts="1501433559" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2017-07-30 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="723 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><html><head><meta http-equiv=Content-Type content="text/html; charset=windows-1252"><meta name=Generator content="Microsoft Word 12 (filtered)"><style></style><body lang=EN-US link=blue vlink=purple><div class=WordSection1><p class=MsoNormal><i>[Please read part 1 <a href="http://llorllale.blogspot.com/2013/02/the-case-of-sudden-oc4j-restarts.html">here</a>.]</i></p><p class=MsoNormal><b><span style='font-size:12.0pt;line-height:115%; color:red'>TL;DR: for JDK 1.5, watch your Full GC frequency with sun.rmi.dgc.server.gcInterval/sun.rmi.dgc.client.gcInterval</span></b></p><p class=MsoNormal>Read on for more.</p><p class=MsoNormal>Logging basic GC activity revealed very odd behavior:</p><p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><em><b><span style='font-family:"Calibri","sans-serif";font-style:normal'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></b></em><em><b><span style='font-family:"Calibri","sans-serif";font-style:normal'>Extended full garbage collection every evening at 10 pm.</span></b></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Looking through the logs I would reliably find a large spike in the duration of one full garbage collection cycle at the exact same hour. I still cannot ascertain the cause of this - I searched extensively and found nothing. I even went to #oracle @ freenode but got no answer. One thing I did notice while going back through the opmn.log: ping timeouts almost always occurred at this time, and, indeed, there was at least one instance when OPMN bounced the server at this hour.</span></em></p><p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><em><b><span style='font-family:"Calibri","sans-serif";font-style:normal'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></b></em><em><b><span style='font-family:"Calibri","sans-serif";font-style:normal'>Full garbage collection approximately every ~64 seconds.</span></b></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>This one was interesting. </span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>The Full GCs ran like clockwork instead of as a response to the server's load:</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><center><p class=MsoListParagraphCxSpMiddle style='text-indent:-.5in'><a href="http://1.bp.blogspot.com/-DENa1BM5SuM/UW4Df1yhrEI/AAAAAAAAANk/j9SUxIqlZdA/s1600/image001.jpg" imageanchor="1" ><img border="0" data-src="http://1.bp.blogspot.com/-DENa1BM5SuM/UW4Df1yhrEI/AAAAAAAAANk/j9SUxIqlZdA/s320/image001.jpg" data-proofer-ignore></a></p></center><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>At first it struck me as odd that the average interval between Full GCs would be 64 seconds as opposed to 60. Looking back now the answer is obvious. More on that later.</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Memory usage was forcefully kept in check by the constant battering of the garbage collector but at the cost of processing time available to do actual work: the JVM was losing 7.53% of its time to garbage collection. Breaking this down further:</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><div align=center><table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0 style='margin-left:.5in;border-collapse:collapse;border:none'><tr><td width=197 valign=top style='width:2.05in;border:solid windowtext 1.0pt; padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpMiddle style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt; border-left:none;padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpMiddle style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><b><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Young GC</span></b></em></p><td width=64 valign=top style='width:48.0pt;border:solid windowtext 1.0pt; border-left:none;padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpLast style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><b><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Full GC</span></b></em></p><tr><td width=197 valign=top style='width:2.05in;border:solid windowtext 1.0pt; border-top:none;padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpFirst style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><b><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Avg mem. usage post gc (MB)</span></b></em></p><td width=80 valign=top style='width:60.25pt;border-top:none;border-left: none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt; padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpMiddle style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>592</span></em></p><td width=64 valign=top style='width:48.0pt;border-top:none;border-left:none; border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt; padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpLast style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>539</span></em></p><tr><td width=197 valign=top style='width:2.05in;border:solid windowtext 1.0pt; border-top:none;padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpFirst style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><b><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Total memory freed (%)</span></b></em></p><td width=80 valign=top style='width:60.25pt;border-top:none;border-left: none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt; padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpMiddle style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>98.5</span></em></p><td width=64 valign=top style='width:48.0pt;border-top:none;border-left:none; border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt; padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpLast style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>1.5</span></em></p><tr><td width=197 valign=top style='width:2.05in;border:solid windowtext 1.0pt; border-top:none;padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpFirst style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><b><span style='font-family:"Calibri","sans-serif"; font-style:normal'>GC time spent (%)</span></b></em></p><td width=80 valign=top style='width:60.25pt;border-top:none;border-left: none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt; padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpMiddle style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>3.6</span></em></p><td width=64 valign=top style='width:48.0pt;border-top:none;border-left:none; border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt; padding:0in 5.4pt 0in 5.4pt'><p class=MsoListParagraphCxSpLast style='margin:0in;margin-bottom:.0001pt; line-height:normal'><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>96.4</span></em></p></table></div><p class=MsoListParagraphCxSpFirst><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>The numbers are clear: these Full GC cycles are not being effective at all - in fact, they look outright useless and are robbing our server of precious processing time to do actual work!</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>So what could be triggering constant full garbage collection? This puzzled me for a while.</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>I went through all the parameters being passed to the JVM at startup: nothing. I felt confident about this finding yet I decided to put a final nail in the coffin and set the </span></em><em><span style='font-family: "Calibri","sans-serif"'>-XX:+DisableExplicitGC</span></em><em><span style='font-family:"Calibri","sans-serif";font-style:normal'> flag. This would also allow me to confirm if there exists some code somewhere in the JVM's classpath calling the System.gc() function. The results were striking:</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><center><p class=MsoListParagraphCxSpMiddle style='text-indent:-.5in'><a href="http://2.bp.blogspot.com/-WB7i4nrx36k/UW4EbwOEqVI/AAAAAAAAAN0/f-CDGdSHxtM/s1600/image002.jpg" imageanchor="1" ><img border="0" data-src="http://2.bp.blogspot.com/-WB7i4nrx36k/UW4EbwOEqVI/AAAAAAAAAN0/f-CDGdSHxtM/s320/image002.jpg" data-proofer-ignore></a></p></center><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>How much server uptime was lost to garbage collection now? 0.19%. Looking good.</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Of course, average memory usage and allocation increased - as expected - and the JVM's natural garbage collection algorithm reliably kicked in and freed enough memory.</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><b><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Who was calling System.gc() ?</span></b></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Good question.</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>First order of business was to review our source code. System.gc() was nowhere to be found. Next - check all dependencies explicitly declared for our projects. Decompiling them all and searching revealed 5 classes: 2 were Oracle's (weblogic, orabpel) and the other was related to Mozilla's javascript engine. A very brief attempt at figuring out all the possible paths that can lead this code to call System.gc() was very quickly aborted: this is a very difficult task, and I would be leaving out the countless other classes in the JVM's classpath.</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>I decided to dive into Oracle's KB to see what I can find. Answer: not much. Apparently, no one else was having this issue, or not many people have noticed it yet. I found quite a few articles detailing JVM troubleshooting methods, SOA Suite installation guides, etc., etc. - nothing of much use. Then, in passing, as a final note in an article liked to by another, I found mention of these uncommonly used startup parameters:</span></em></p><p class=MsoListParagraphCxSpMiddle style='margin-left:1.0in;text-indent:-.25in'><em><span style='font-family:Symbol;font-style:normal'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></em><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>sun.rmi.dgc.server.gcInterval</span></em></p><p class=MsoListParagraphCxSpMiddle style='margin-left:1.0in;text-indent:-.25in'><em><span style='font-family:Symbol;font-style:normal'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></em><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>sun.rmi.dgc.client.gcInterval</span></em></p><p class=MsoListParagraphCxSpMiddle style='margin-left:1.0in;text-indent:-.5in'><em><span style='font-family:"Calibri","sans-serif";font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>You can read more about them <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/sunrmiproperties.html">here</a>. The default time of 1 hour mentioned there was not always the case - <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/relnotes.html">it used to be 1 minute</a>. Our JDK was affected. </span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>The difference between those default 60 seconds and the ~64 seconds on average from the first graph above were enough to bug me - until I looked at the second graph again: the average duration of each Full GC hovered close to 4 seconds. 60 + ~4 ~= 64. :D</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Removing the </span></em><em><span style='font-family:"Calibri","sans-serif"'>-XX:+DisableExplicitGC</span></em><em><span style='font-family:"Calibri","sans-serif";font-style:normal'> flag and adding these two above, set to 1 hour each, proved fruitful: Full GCs were mostly limited to that hourly schedule.</span></em></p><p class=MsoListParagraphCxSpMiddle><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>&nbsp;</span></em></p><p class=MsoListParagraphCxSpLast><em><span style='font-family:"Calibri","sans-serif"; font-style:normal'>Now it's just a question of figuring out the best values for our needs (or whether we need these settings at all).</span></em></p></div></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/rmi/" class="post-tag no-text-decoration" >rmi</a> <a href="/tags/jvm/" class="post-tag no-text-decoration" >jvm</a> <a href="/tags/oc4j/" class="post-tag no-text-decoration" >oc4j</a> <a href="/tags/oracle/" class="post-tag no-text-decoration" >oracle</a> <a href="/tags/soa-suite/" class="post-tag no-text-decoration" >soa suite</a> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://t.me/share/url?url=https://georgearisty.dev/posts/the-case-of-sudden-oc4j-restarts-part-2/&amp;text=The Case of the Sudden OC4J Restarts [part 2] - George Aristy" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://georgearisty.dev/posts/the-case-of-sudden-oc4j-restarts-part-2/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://news.ycombinator.com/submitlink?u=https://georgearisty.dev/posts/the-case-of-sudden-oc4j-restarts-part-2/&amp;t=The Case of the Sudden OC4J Restarts [part 2] - George Aristy" data-toggle="tooltip" data-placement="top" title="Hacker News" target="_blank" rel="noopener" aria-label="Hacker News"> <i class="fa-fw fab fa-hacker-news"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kubectl-plugins/">Plugins I use with kubectl</a><li><a href="/posts/test-driven-development-by-example/">Test-Driven Development By Example</a><li><a href="/posts/ckad/">Certified Kubernetes Application Developer: My Experience</a><li><a href="/posts/clean-architecture/">Clean Architecture: A Craftsman's Guide to Software Structure and Design</a><li><a href="/posts/build-trap/">Escaping the Build Trap: How Effective Product Management Creates Real Value</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/learning-go/">learning-go</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/vim/">vim</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/elegant-objects/">elegant-objects</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/jdbc-and-oracle-setnull/"><div class="card-body"> <em class="timeago small" data-ts="1286374440" > 2010-10-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JDBC and Oracle: setNULL</h3><div class="text-muted small"><p> I was surprised (and disappointed) by this behaviour (using Sun JVM 1.4 with Oracle DB 10g):String sql = “select count(distinct seq_no) from tmp_table where time_stamp = to_date(‘29/09/2010 07:00:0...</p></div></div></a></div><div class="card"> <a href="/posts/oracles-jdbc-blob-support-sucks/"><div class="card-body"> <em class="timeago small" data-ts="1312585020" > 2011-08-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Oracle's JDBC BLOB support sucks....</h3><div class="text-muted small"><p> Exception in thread “main” : java.lang.ClassCastException: javax.sql.rowset.serial.SerialBlob cannot be cast to oracle.sql.BLOB…Caused by: java.lang.ClassCastException: javax.sql.rowset.serial.Seri...</p></div></div></a></div><div class="card"> <a href="/posts/java-collections-waste-or-lack-thereof/"><div class="card-body"> <em class="timeago small" data-ts="1392267600" > 2014-02-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java Collections waste (or lack thereof)</h3><div class="text-muted small"><p> If you are a performance freak who makes sure every collection is initialized with the “right” size then don’t be: http://java.dzone.com/articles/java-collection-waste. In all fairness, notice the ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/vim-tip-of-day/" class="btn btn-outline-primary" prompt="Older"><p>Vim Tip of the Day!</p></a> <a href="/posts/a-note-on-weblogic-jms-queue-pending/" class="btn btn-outline-primary" prompt="Newer"><p>A note on Weblogic JMS Queue pending + current messages count</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "llorllale/llorllale.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnk4MDM1Mjk5Ng==", "data-category": "Announcements", "data-category-id": "DIC_kwDOBMoW5M4COm92", "data-mapping": "title", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://www.linkedin.com/in/georgearisty">George Aristy</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/learning-go/">learning-go</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/vim/">vim</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/elegant-objects/">elegant-objects</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="/assets/lib/simple-jekyll-search-1.10.0/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="/assets/lib/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script> <script src="/assets/lib/lozad-1.16.0/lozad.min.js"></script> <script src="/assets/lib/clipboard-2.0.9/clipboard.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/dayjs.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/locale/en.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/plugin/relativeTime.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="/assets/lib/bootstrap-4.6.1/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-P9Y4YYSCTS"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-P9Y4YYSCTS'); }); </script>
