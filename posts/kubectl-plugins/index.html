<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Plugins I use with kubectl" /><meta name="author" content="George Aristy" /><meta property="og:locale" content="en_US" /><meta name="description" content="kubectl is the official tool to query and run changes on a Kubernetes cluster and provides a powerful and extensible CLI interface. There are many alternative tools out there that do a similar job (some with GUIs); I deliberately stick with kubectl on my road to master Kubernetes, which means I try not to hide too much of the complexity in the hopes of burning them into my mind. Sometimes though, there are actions that are far too elaborate or complicated considering the number of times I need to execute them. Other times, I just wish the tool itself offered some slight quality of life improvements to the overall experience." /><meta property="og:description" content="kubectl is the official tool to query and run changes on a Kubernetes cluster and provides a powerful and extensible CLI interface. There are many alternative tools out there that do a similar job (some with GUIs); I deliberately stick with kubectl on my road to master Kubernetes, which means I try not to hide too much of the complexity in the hopes of burning them into my mind. Sometimes though, there are actions that are far too elaborate or complicated considering the number of times I need to execute them. Other times, I just wish the tool itself offered some slight quality of life improvements to the overall experience." /><link rel="canonical" href="https://georgearisty.dev/posts/kubectl-plugins/" /><meta property="og:url" content="https://georgearisty.dev/posts/kubectl-plugins/" /><meta property="og:site_name" content="George Aristy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-11-28T15:40:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Plugins I use with kubectl" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@George Aristy" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"George Aristy"},"dateModified":"2023-05-03T10:28:45-04:00","datePublished":"2022-11-28T15:40:00-05:00","description":"kubectl is the official tool to query and run changes on a Kubernetes cluster and provides a powerful and extensible CLI interface. There are many alternative tools out there that do a similar job (some with GUIs); I deliberately stick with kubectl on my road to master Kubernetes, which means I try not to hide too much of the complexity in the hopes of burning them into my mind. Sometimes though, there are actions that are far too elaborate or complicated considering the number of times I need to execute them. Other times, I just wish the tool itself offered some slight quality of life improvements to the overall experience.","headline":"Plugins I use with kubectl","mainEntityOfPage":{"@type":"WebPage","@id":"https://georgearisty.dev/posts/kubectl-plugins/"},"url":"https://georgearisty.dev/posts/kubectl-plugins/"}</script><title>Plugins I use with kubectl | George Aristy</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="George Aristy"><meta name="application-name" content="George Aristy"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/lib/fonts/main.css"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="/assets/lib/bootstrap-4.6.1/bootstrap.min.css"><link rel="stylesheet" href="/assets/lib/fontawesome-free-5.15.4/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/lib/magnific-popup-1.1.0/magnific-popup.css"> <script src="/assets/lib/jquery-3.6.0/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/portrait.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">George Aristy</a></div><div class="site-subtitle font-italic">Blog about software craftmanship</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/bookshelf/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKSHELF</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-project-diagram ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/talks/" class="nav-link"> <i class="fa-fw fas fa-comment ml-xl-3 mr-xl-3 unloaded"></i> <span>TALKS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/llorllale" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['george.aristy','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/georgearisty/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://stackoverflow.com/users/1623885/george-aristy" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Plugins I use with kubectl</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Plugins I use with kubectl</h1><div class="post-meta text-muted"><div> By <em> <a href="https://www.linkedin.com/in/georgearisty">George Aristy</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1669668000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-11-28 </em> </span> <span> Updated <em class="timeago" data-ts="1683124125" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-05-03 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1498 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><p><a href="https://kubernetes.io/docs/reference/kubectl/"><code class="language-plaintext highlighter-rouge">kubectl</code></a> is the official tool to query and run changes on a Kubernetes cluster and provides a powerful and extensible CLI interface. There are many alternative tools out there that do a similar job (some with GUIs); I deliberately stick with <code class="language-plaintext highlighter-rouge">kubectl</code> on my road to master Kubernetes, which means I try not to hide too much of the complexity in the hopes of burning them into my mind. Sometimes though, there are actions that are far too elaborate or complicated considering the number of times I need to execute them. Other times, I just wish the tool itself offered some slight quality of life improvements to the overall experience.</p><p>Following are the plugins I personally use all the time to scratch some of my itches with daily use of <code class="language-plaintext highlighter-rouge">kubectl</code>. Before we go into those, let’s first quickly go over a few productivity hacks:</p><h1 id="productivity-hacks">Productivity Hacks</h1><h2 id="aliasing"><span class="mr-2">Aliasing</span><a href="#aliasing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Considering how many times a day I run a command with <code class="language-plaintext highlighter-rouge">kubectl</code>, I estimate aliasing this command probably saves me hundreds of keystrokes per day.</p><p>Alias <code class="language-plaintext highlighter-rouge">kubectl</code> to a shorter string that is meaningful to you. I use <code class="language-plaintext highlighter-rouge">k</code> and honestly it’s probably <strong>the</strong> convention at this point:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">alias </span><span class="nv">k</span><span class="o">=</span>kubectl
<span class="nv">$ </span>k get po
NAME    READY   STATUS    RESTARTS      AGE
web-0   1/1     Running   1 <span class="o">(</span>94s ago<span class="o">)</span>   2d15h
...
</pre></table></code></div></div><h2 id="shortnames"><span class="mr-2">Shortnames</span><a href="#shortnames" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Familiarize yourself with the short names of the resource definitions recognized by your cluster:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c"># compare this:</span>
<span class="nv">$ </span>k get replicationcontrollers
<span class="c"># to this:</span>
<span class="nv">$ </span>k get rc
</pre></table></code></div></div><p>Note that not all resources have shortnames.</p><blockquote class="prompt-tip"><div><p>You can use the <code class="language-plaintext highlighter-rouge">api-resources</code> command to see the shortnames available for the resource definitions in your cluster:</p><details> <summary>Example</summary><div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k api-resources
NAME                              SHORTNAMES   APIVERSION                             NAMESPACED   KIND
bindings                                       v1                                     <span class="nb">true         </span>Binding
componentstatuses                 cs           v1                                     <span class="nb">false        </span>ComponentStatus
configmaps                        cm           v1                                     <span class="nb">true         </span>ConfigMap
endpoints                         ep           v1                                     <span class="nb">true         </span>Endpoints
events                            ev           v1                                     <span class="nb">true         </span>Event
limitranges                       limits       v1                                     <span class="nb">true         </span>LimitRange
namespaces                        ns           v1                                     <span class="nb">false        </span>Namespace
...
</pre></table></code></div></div></div></details></div></blockquote><h2 id="dry-runs"><span class="mr-2">Dry runs</span><a href="#dry-runs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#create"><code class="language-plaintext highlighter-rouge">kubectl create</code></a> and <a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#run"><code class="language-plaintext highlighter-rouge">kubectl run</code></a> have the options <code class="language-plaintext highlighter-rouge">--dry-run</code> that I find very useful for quickly sketching the basis for a resource I want to create when I set the output to yaml format:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k create deploy mydeploy <span class="nt">--image</span><span class="o">=</span>nginx <span class="nt">--replicas</span><span class="o">=</span>3 <span class="nt">--dry-run</span><span class="o">=</span>client <span class="nt">-o</span> yaml 
apiVersion: apps/v1
kind: Deployment
metadata:
  creationTimestamp: null
  labels:
    app: mydeploy
  name: mydeploy
spec:
  replicas: 3
  selector:
    matchLabels:
      app: mydeploy
  strategy: <span class="o">{}</span>
  template:
    metadata:
      creationTimestamp: null
      labels:
        app: mydeploy
    spec:
      containers:
      - image: nginx
        name: nginx
        resources: <span class="o">{}</span>
status: <span class="o">{}</span>
</pre></table></code></div></div><p>You can pipe that output to a file and make additional tweaks there. Bonus points if instead you patch the output directly with <a href="https://jamesdefabia.github.io/docs/user-guide/kubectl/kubectl_patch/"><code class="language-plaintext highlighter-rouge">kubectl patch</code></a> (advanced).</p><h2 id="autocompletion"><span class="mr-2">Autocompletion</span><a href="#autocompletion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Enable autocompletion for your shell:</p><ul><li><a href="https://kubernetes.io/docs/tasks/tools/included/optional-kubectl-configs-bash-linux/">bash</a><li><a href="https://kubernetes.io/docs/tasks/tools/included/optional-kubectl-configs-zsh/">zsh</a></ul><h1 id="plugins">Plugins</h1><h2 id="krew"><span class="mr-2">krew</span><a href="#krew" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Plugins can be “installed” to <code class="language-plaintext highlighter-rouge">kubectl</code> simply by placing the binary in your <code class="language-plaintext highlighter-rouge">$PATH</code> and adding the <code class="language-plaintext highlighter-rouge">kubectl-</code> prefix. It’s as simple as:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># '~/bin` is in my $PATH</span>
<span class="nv">$ </span><span class="nb">printf</span> <span class="s1">'#!/bin/bash\n\necho $1'</span> <span class="o">&gt;</span> ~/bin/kubectl-echo
<span class="nv">$ </span><span class="nb">chmod</span> +x ~/bin/kubectl-echo
<span class="nv">$ </span>k <span class="nb">echo</span> <span class="s1">'Hello World!'</span>
Hello World!
</pre></table></code></div></div><p>If you want to avoid the hassle of placing the executables in the correct path, and/or if you would like a tool that can list plugins from a central repository and automatically install those for you, then <a href="https://github.com/kubernetes-sigs/krew/">Krew</a> is for you.</p><p><code class="language-plaintext highlighter-rouge">Krew</code> is a package manager maintained by the Kubernetes Special Interest Group (SIG) <em>CLI</em> and can do all of this for you:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre><span class="c"># List all plugins in the repo:</span>
<span class="nv">$ </span>k krew search
NAME                            DESCRIPTION                                         INSTALLED
access-matrix                   Show an RBAC access matrix <span class="k">for </span>server resources     no
accurate                        Manage Accurate, a multi-tenancy controller         no
advise-policy                   Suggests PodSecurityPolicies and OPA Policies f...  no
advise-psp                      Suggests PodSecurityPolicies <span class="k">for </span>cluster.           no
...

<span class="c"># Show info for a plugin:</span>
<span class="nv">$ </span>k krew info advise-policy
NAME: advise-policy
INDEX: default
URI: https://github.com/sysdiglabs/kube-policy-advisor/releases/download/v1.0.2/kube-policy-advisor_v1.0.2_linux_amd64.tar.gz
SHA256: 2d3968fd80d6fe40976dbc86655ef8fe3e6ea4bcb0c43fafb99a39000daa549f
VERSION: v1.0.2
HOMEPAGE: https://github.com/sysdiglabs/kube-policy-advisor
DESCRIPTION: 
Suggests PSPs and OPA Policies based on the required capabilities of the currently running
workloads or a given manifest.

<span class="c"># Install a plugin:</span>
<span class="nv">$ </span>k krew <span class="nb">install </span>advise-policy
Updated the <span class="nb">local </span>copy of plugin index.
Installing plugin: advise-policy
Installed plugin: advise-policy
<span class="se">\</span>
 | Use this plugin:
 |      kubectl advise-policy
 | Documentation:
 |      https://github.com/sysdiglabs/kube-policy-advisor
/
WARNING: You installed plugin <span class="s2">"advise-policy"</span> from the krew-index plugin repository.
   These plugins are not audited <span class="k">for </span>security by the Krew maintainers.
   Run them at your own risk.
   
<span class="c"># List installed plugins:</span>
<span class="nv">$ </span>k krew list
advise-policy
ctx
krew
ns
...
</pre></table></code></div></div><h2 id="ctx"><span class="mr-2">ctx</span><a href="#ctx" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://github.com/ahmetb/kubectx/">ctx</a> is a simple plugin to switch between contexts (clusters) with <code class="language-plaintext highlighter-rouge">kubectl</code>. This is a great timesaver when you constantly have to switch between different contexts (clusters). You can install it with <code class="language-plaintext highlighter-rouge">k krew install ctx</code>.</p><p>View configured contexts:</p><p>The normal way:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k config get-contexts
CURRENT   NAME       CLUSTER    AUTHINFO   NAMESPACE
<span class="k">*</span>         myclusterA myclusterA myclusterA default
          myclusterB myclusterB myclusterB default
          myclusterC myclusterC myclusterC default
</pre></table></code></div></div><p>Using <code class="language-plaintext highlighter-rouge">ctx</code>:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k ctx
myclusterA
myclusterB
myclusterC
</pre></table></code></div></div><p>Switch context:</p><p>The normal way:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k config set-context myclusterA
Context <span class="s2">"myclusterA"</span> modified.
</pre></table></code></div></div><p>Using <code class="language-plaintext highlighter-rouge">ctx</code>:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k ctx myclusterA
Switched to context <span class="s2">"myclusterA"</span><span class="nb">.</span>
</pre></table></code></div></div><h2 id="ns"><span class="mr-2">ns</span><a href="#ns" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://github.com/ahmetb/kubectx/">ns</a> is a sibling of <a href="#ctx"><code class="language-plaintext highlighter-rouge">ctx</code></a> with a very similar purpose: it allows you to easily list and change between namespaces. This is another big timesaver. You can install it with <code class="language-plaintext highlighter-rouge">k krew install ns</code>.</p><p>List namespaces:</p><p>The normal way:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k get ns
NAME              STATUS   AGE
default           Active   116d
gcp-auth          Active   34d
istio-system      Active   112d
istioinaction     Active   112d
kube-node-lease   Active   116d
kube-public       Active   116d
kube-system       Active   116d
</pre></table></code></div></div><p>Using <code class="language-plaintext highlighter-rouge">ns</code>:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k ns
default
gcp-auth
istio-system
istioinaction
kube-node-lease
kube-public
kube-system
</pre></table></code></div></div><p>Switching namespaces (this is a big one):</p><p>The normal way:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k config set-context <span class="nt">--current</span> <span class="nt">--namespace</span><span class="o">=</span>kube-public
Context <span class="s2">"myclusterA"</span> modified.
</pre></table></code></div></div><p>Using <code class="language-plaintext highlighter-rouge">ns</code>:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k ns kube-public
Context <span class="s2">"myclusterA modified.
Active namespace is "</span>kube-public<span class="s2">".
</span></pre></table></code></div></div><h2 id="tail"><span class="mr-2">tail</span><a href="#tail" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://github.com/boz/kail"><code class="language-plaintext highlighter-rouge">tail</code></a> is a great plugin for streaming logs from pods. It extends the builtin <code class="language-plaintext highlighter-rouge">kubectl logs</code> functionality with the ability to figure out the labels of the pods for you when you point it to a <code class="language-plaintext highlighter-rouge">Service</code> or a controller. You can install it with <code class="language-plaintext highlighter-rouge">k krew install tail</code>.</p><p>Example:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k create deploy mydeploy <span class="nt">--image</span><span class="o">=</span>mysql:latest
deployment.apps/mydeploy created
<span class="nv">$ </span>k <span class="nb">tail</span> <span class="nt">-d</span> mydeploy
kube-public/mydeploy-d8c5f59cc-xjdn2[mysql]: 2022-11-28 20:10:32+00:00 <span class="o">[</span>Note] <span class="o">[</span>Entrypoint]: Entrypoint script <span class="k">for </span>MySQL Server 8.0.31-1.el8 started.
kube-public/mydeploy-d8c5f59cc-xjdn2[mysql]: 2022-11-28 20:10:32+00:00 <span class="o">[</span>Note] <span class="o">[</span>Entrypoint]: Switching to dedicated user <span class="s1">'mysql'</span>
kube-public/mydeploy-d8c5f59cc-xjdn2[mysql]: 2022-11-28 20:10:32+00:00 <span class="o">[</span>Note] <span class="o">[</span>Entrypoint]: Entrypoint script <span class="k">for </span>MySQL Server 8.0.31-1.el8 started.
...
</pre></table></code></div></div><p>Another awesome feature is that it does <strong>not</strong> require <code class="language-plaintext highlighter-rouge">RUNNING</code> pods - it just keeps listening for any pods with the matching criteria. This is unlike <code class="language-plaintext highlighter-rouge">kubectl logs -f</code> which fails if there are no matching <code class="language-plaintext highlighter-rouge">RUNNING</code> pods. This is great when you don’t want to waste time waiting for the deployment to be live to finally execute a command that tails the logs.</p><h2 id="deprecations"><span class="mr-2">deprecations</span><a href="#deprecations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://github.com/rikatz/kubepug"><code class="language-plaintext highlighter-rouge">deprecations</code></a> lists all standard K8S resources found in your cluster that are deprecated (as found in Kubernetes’ <a href="https://github.com/kubernetes/kubernetes/blob/525280d285c4bb4970e571a1e13a601befd75434/api/openapi-spec/swagger.json">OpenAPI spec</a>). This is a handy tool that helps you keep your cluster and resources up-to-date. You can install it with <code class="language-plaintext highlighter-rouge">k krew install deprecations</code>.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nv">$ </span>k deprecations
W1128 15:24:46.214313  450713 warnings.go:70] v1 ComponentStatus is deprecated <span class="k">in </span>v1.19+
RESULTS:
Deprecated APIs:

ComponentStatus found <span class="k">in</span> /v1
         ├─ ComponentStatus <span class="o">(</span>and ComponentStatusList<span class="o">)</span> holds the cluster validation info. Deprecated: This API is deprecated <span class="k">in </span>v1.19+
                -&gt; GLOBAL: scheduler 
                -&gt; GLOBAL: controller-manager 
                -&gt; GLOBAL: etcd-0 


Deleted APIs:

</pre></table></code></div></div><h2 id="safe"><span class="mr-2">safe</span><a href="#safe" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Do you sometimes feel your spidey sense tingling and your palms sweating a little bit as you constantly switch between contexts (<code class="language-plaintext highlighter-rouge">k ctx</code>) and namespaces (<code class="language-plaintext highlighter-rouge">k ns</code>) while you query the cluster and modify resources? Have you ever thought that maybe you’re being a bit too cavalier with your k8s-foo and should probably slow down and double-check the command you’re about to run before you hit <code class="language-plaintext highlighter-rouge">Enter</code>? <code class="language-plaintext highlighter-rouge">safe</code>](https://github.com/rumstead/kubectl-safe) is here to assuage your fears. You can install it with <code class="language-plaintext highlighter-rouge">k krew install safe</code>.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c"># Alias to ensure you're always SAFE:</span>
<span class="nv">$ </span><span class="nb">alias </span><span class="nv">k</span><span class="o">=</span>kubectl safe
<span class="c"># Queries work as usual:</span>
<span class="nv">$ </span>k get po
<span class="c"># Changes must be acknowledged however:</span>
<span class="nv">$ </span>k create deploy mydeploy <span class="nt">--image</span><span class="o">=</span>nginx
You are running a create against context myclusterA, <span class="k">continue</span>? <span class="o">[</span>yY]
</pre></table></code></div></div><h2 id="kubecolor"><span class="mr-2">kubecolor</span><a href="#kubecolor" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://github.com/hidetatz/kubecolor"><code class="language-plaintext highlighter-rouge">kubecolor</code></a> replaces <code class="language-plaintext highlighter-rouge">kubectl</code> and colorizes the output<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>. Since it’s a replacement binary, you cannot install it with <code class="language-plaintext highlighter-rouge">krew</code> - you either <a href="https://github.com/hidetatz/kubecolor#installation">download a prebuilt binary or build it yourself</a>.</p><p>Examples:</p><p><img data-src="/assets/img/kubectl-plugins/kubecolor-ns.png" alt="ns" data-proofer-ignore></p><p><img data-src="/assets/img/kubectl-plugins/kubecolor-top.png" alt="top" data-proofer-ignore></p><h1 id="footnotes">Footnotes</h1><div class="footnotes" role="doc-endnotes"><ol><li id="fn:1" role="doc-endnote"><p>Make sure you install from <a href="https://github.com/prune998/kubecolor/tree/prune/ctx-no-color">this fork/branch</a> to fix compatibility issues with <code class="language-plaintext highlighter-rouge">ctx</code> and <code class="language-plaintext highlighter-rouge">ns</code>. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p></ol></div></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a> <a href="/tags/k8s/" class="post-tag no-text-decoration" >k8s</a> <a href="/tags/kubectl/" class="post-tag no-text-decoration" >kubectl</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://t.me/share/url?url=https://georgearisty.dev/posts/kubectl-plugins/&amp;text=Plugins I use with kubectl - George Aristy" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://georgearisty.dev/posts/kubectl-plugins/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://news.ycombinator.com/submitlink?u=https://georgearisty.dev/posts/kubectl-plugins/&amp;t=Plugins I use with kubectl - George Aristy" data-toggle="tooltip" data-placement="top" title="Hacker News" target="_blank" rel="noopener" aria-label="Hacker News"> <i class="fa-fw fab fa-hacker-news"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kubectl-plugins/">Plugins I use with kubectl</a><li><a href="/posts/test-driven-development-by-example/">Test-Driven Development By Example</a><li><a href="/posts/ckad/">Certified Kubernetes Application Developer: My Experience</a><li><a href="/posts/clean-architecture/">Clean Architecture: A Craftsman's Guide to Software Structure and Design</a><li><a href="/posts/build-trap/">Escaping the Build Trap: How Effective Product Management Creates Real Value</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/learning-go/">learning-go</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/vim/">vim</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/elegant-objects/">elegant-objects</a></div></div></div><script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ckad/"><div class="card-body"> <em class="timeago small" data-ts="1652054400" > 2022-05-08 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Certified Kubernetes Application Developer: My Experience</h3><div class="text-muted small"><p> I recently passed the Certified Kubernetes Application Developer exam1 and thought I’d share my experience leading up to and during the exam. Curriculum This is the newest exam curriculum, eff...</p></div></div></a></div><div class="card"> <a href="/posts/kubernetes-in-action/"><div class="card-body"> <em class="timeago small" data-ts="1669471200" > 2022-11-26 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kubernetes In Action</h3><div class="text-muted small"><p> Written by Marko Lukša, Kubernetes In Action is a fantastic book covering all operational aspects of Kubernetes. I find it very hard to think of a better book on the subject. This is the first edi...</p></div></div></a></div><div class="card"> <a href="/posts/k8s-cluster-network/"><div class="card-body"> <em class="timeago small" data-ts="1678456200" > 2023-03-10 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Understanding Kubernetes' Cluster Networking</h3><div class="text-muted small"><p> Kubernetes is a system for automating deployment, scaling, and management of containerized applications. Networking is a central part of Kubernetes, and in this article we will explore how Kuberne...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/kubernetes-in-action/" class="btn btn-outline-primary" prompt="Older"><p>Kubernetes In Action</p></a> <a href="/posts/k8s-cluster-network/" class="btn btn-outline-primary" prompt="Newer"><p>Understanding Kubernetes' Cluster Networking</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "llorllale/llorllale.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnk4MDM1Mjk5Ng==", "data-category": "Announcements", "data-category-id": "DIC_kwDOBMoW5M4COm92", "data-mapping": "title", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://www.linkedin.com/in/georgearisty">George Aristy</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/go/">go</a> <a class="post-tag" href="/tags/golang/">golang</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/book/">book</a> <a class="post-tag" href="/tags/learning-go/">learning-go</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/vim/">vim</a> <a class="post-tag" href="/tags/concurrency/">concurrency</a> <a class="post-tag" href="/tags/elegant-objects/">elegant-objects</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="/assets/lib/simple-jekyll-search-1.10.0/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="/assets/lib/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script> <script src="/assets/lib/lozad-1.16.0/lozad.min.js"></script> <script src="/assets/lib/clipboard-2.0.9/clipboard.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/dayjs.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/locale/en.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/plugin/relativeTime.min.js"></script> <script src="/assets/lib/dayjs-1.10.7/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="/assets/lib/bootstrap-4.6.1/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-P9Y4YYSCTS"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-P9Y4YYSCTS'); }); </script>
